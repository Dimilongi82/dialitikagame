<script>
(() => {
  const N = 100;

  // ====== Î¡Î¥Î˜ÎœÎ™Î£Î•Î™Î£ Î Î‘Î™Î§ÎÎ™Î”Î™ÎŸÎ¥ ======
  const FEEDBACK_MS = 8000;     // 8" Î¼Î­Î½ÎµÎ¹ Î· Î±Ï€Î¬Î½Ï„Î·ÏƒÎ· + ÎºÎ±Î½ÏŒÎ½Î±Ï‚
  const TRAP_SECONDS = 5;       // ÎºÏŒÎºÎºÎ¹Î½Î¿ Ï‡ÏÎ¿Î½ÏŒÎ¼ÎµÏ„ÏÎ¿ 5"

  // Î˜Î­ÏƒÎµÎ¹Ï‚ Î±Î½Î¬ ÎµÏ€Î¯Ï€ÎµÎ´Î¿ (10 Î¼Ï€Î»Îµ, 8 Ï€ÏÎ¬ÏƒÎ¹Î½Î±, 4 ÎºÎ¯Ï„ÏÎ¹Î½Î±, 6 ÎºÏŒÎºÎºÎ¹Î½Î±)
  const BLUE_POS  = [4,8,12,16,20,24,28,32,36,40];                 // 10
  const GREEN_POS = [45,48,52,56,60,64,68,72];                     // 8
  const GOLD_POS  = [76,82,88,94];                                 // 4
  const RED_POS   = [81,85,89,91,95,98];                           // 6  (timer)

  const BLUE  = new Set(BLUE_POS);
  const GREEN = new Set(GREEN_POS);
  const GOLD  = new Set(GOLD_POS);
  const RED   = new Set(RED_POS);

  // ====== ÎšÎ‘ÎÎŸÎÎ•Î£ (Î¤Î¡Î™Î‘ÎÎ¤Î‘Î¦Î¥Î›Î›Î™Î”Î—Î£) ======
  const ruleBase =
    'Î£ÏÎ¼Ï†Ï‰Î½Î± Î¼Îµ Ï„Î· Î“ÏÎ±Î¼Î¼Î±Ï„Î¹ÎºÎ® Î¤ÏÎ¹Î±Î½Ï„Î±Ï†Ï…Î»Î»Î¯Î´Î·: Î¤Î± Î´Î¹Î±Î»Ï…Ï„Î¹ÎºÎ¬ ÏƒÎ·Î¼ÎµÎ¹ÏÎ½Î¿Î½Ï„Î±Î¹ Ï€Î¬Î½Ï‰ Î±Ï€ÏŒ Ï„Î¿ Î¹ Î® Ï… Î³Î¹Î± Î½Î± Î´ÎµÎ¯Î¾Î¿Ï…Î¼Îµ ÏŒÏ„Î¹ Ï€ÏÎ¿Ï†Î­ÏÎ¿Î½Ï„Î±Î¹ Ï‡Ï‰ÏÎ¹ÏƒÏ„Î¬ Î±Ï€ÏŒ Ï„Î¿ Ï€ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î¿ Ï†Ï‰Î½Î®ÎµÎ½ (Î±, Îµ, Î¿, Ï…).';
  const ruleTone =
    'Î£ÏÎ¼Ï†Ï‰Î½Î± Î¼Îµ Ï„Î· Î“ÏÎ±Î¼Î¼Î±Ï„Î¹ÎºÎ® Î¤ÏÎ¹Î±Î½Ï„Î±Ï†Ï…Î»Î»Î¯Î´Î·: Î”Îµ ÏƒÎ·Î¼ÎµÎ¹ÏÎ½Î¿Ï…Î¼Îµ Ï„Î± Î´Î¹Î±Î»Ï…Ï„Î¹ÎºÎ¬ ÏŒÏ„Î±Î½ Ï„Î¿ Ï€ÏÎ¿Î·Î³Î¿ÏÎ¼ÎµÎ½Î¿ Ï†Ï‰Î½Î®ÎµÎ½ Ï€Î±Î¯ÏÎ½ÎµÎ¹ Ï„ÏŒÎ½Î¿ (Î¿ Ï„ÏŒÎ½Î¿Ï‚ â€œÎ´Î¹ÏÏ‡Î½ÎµÎ¹â€ Ï„Î¿ ÎºÎ±Ï€Î­Î»Î¿).';
  const ruleNoDiph =
    'Î£ÏÎ¼Ï†Ï‰Î½Î± Î¼Îµ Ï„Î· Î“ÏÎ±Î¼Î¼Î±Ï„Î¹ÎºÎ® Î¤ÏÎ¹Î±Î½Ï„Î±Ï†Ï…Î»Î»Î¯Î´Î·: Î”Îµ ÏƒÎ·Î¼ÎµÎ¹ÏÎ½Î¿Ï…Î¼Îµ Î´Î¹Î±Î»Ï…Ï„Î¹ÎºÎ¬ ÏŒÏ„Î±Î½ Î´ÎµÎ½ Î­Ï‡Î¿Ï…Î¼Îµ Î´Î¯ÏˆÎ·Ï†Î¿ Ï†Ï‰Î½Î®ÎµÎ½.';
  const ruleBoth =
    'Î£ÏÎ¼Ï†Ï‰Î½Î± Î¼Îµ Ï„Î· Î“ÏÎ±Î¼Î¼Î±Ï„Î¹ÎºÎ® Î¤ÏÎ¹Î±Î½Ï„Î±Ï†Ï…Î»Î»Î¯Î´Î·: ÎŒÏ„Î±Î½ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹ ÎºÎ±Î¹ Ï‡Ï‰ÏÎ¹ÏƒÏ„Î® Ï€ÏÎ¿Ï†Î¿ÏÎ¬ ÎºÎ±Î¹ Ï„Î¿Î½Î¹ÏƒÎ¼ÏŒÏ‚, Î³ÏÎ¬Ï†Î¿Ï…Î¼Îµ Î´Î¹Î±Î»Ï…Ï„Î¹ÎºÎ¬ Î¼Îµ Ï„ÏŒÎ½Î¿ (Ï€.Ï‡. Ï†Î±Î, ÎµÏ…Ï†Ï…ÎÎ±, Î¤Î±Î°Î³ÎµÏ„Î¿Ï‚, ÎºÎ±ÎÎºÎ¹).';

  // ====== Î›Î™Î£Î¤Î•Î£ (2 ÎµÏ€Î¹Î»Î¿Î³Î­Ï‚: Î´Î¹Î¬Î»ÎµÎ¾Îµ ÏƒÏ‰ÏƒÏ„Î® Î³ÏÎ±Ï†Î®) ======
  // item: { a, b, correct: 'a'|'b', rule }
  const bankBlue = [
    { a:'Ï‡Î±ÏŠÎ´ÎµÏÏ‰', b:'Ï‡Î±Î¹Î´ÎµÏÏ‰', correct:'a', rule:ruleBase },
    { a:'Î¸ÎµÏŠÎºÏŒÏ‚', b:'Î¸ÎµÎ¹ÎºÏŒÏ‚', correct:'a', rule:ruleBase },
    { a:'Î¼Î±ÏŠÎ¼Î¿Ï', b:'Î¼Î±Î¹Î¼Î¿Ï', correct:'a', rule:ruleBase },
    { a:'Î²Î¿ÏŠÎ´Î¬ÎºÎ¹', b:'Î²Î¿Î¹Î´Î¬ÎºÎ¹', correct:'a', rule:ruleBase },
    { a:'Î¼Ï…ÏŠÎºÏŒÏ‚', b:'Î¼Ï…Î¹ÎºÏŒÏ‚', correct:'a', rule:ruleBase },
    { a:'Î¾ÎµÏ‹Ï†Î±Î¯Î½Ï‰', b:'Î¾ÎµÏ…Ï†Î±Î¯Î½Ï‰', correct:'a', rule:ruleBase },
    { a:'Ï€ÏÎ±Ï‹Î½Ï„Î¹ÎºÏŒÏ‚', b:'Ï€ÏÎ±Ï…Î½Ï„Î¹ÎºÏŒÏ‚', correct:'a', rule:ruleBase },
    { a:'Ï€ÏÎ¿Ï‹Ï€ÏŒÎ¸ÎµÏƒÎ·', b:'Ï€ÏÎ¿Ï…Ï€ÏŒÎ¸ÎµÏƒÎ·', correct:'a', rule:ruleBase },
    { a:'Î±Ï‹Ï€Î½Î¯Î±', b:'Î±Ï…Ï€Î½Î¯Î±', correct:'a', rule:ruleBase },
    { a:'ÎºÎ¿ÏÎ¿ÏŠÎ´ÎµÏÏ‰', b:'ÎºÎ¿ÏÎ¿Î¹Î´ÎµÏÏ‰', correct:'a', rule:ruleBase },
  ];

  const bankGreen = [
    { a:'Î½ÎµÏÎ¬Î¹Î´Î±', b:'Î½ÎµÏÎ±ÏŠÎ´Î±', correct:'a', rule:ruleTone },
    { a:'Ï€Î»Î¬Î¹', b:'Ï€Î»Î±ÏŠ', correct:'a', rule:ruleTone },
    { a:'ÎºÎ¿ÏÏŒÎ¹Î´ÎµÏˆÎ±', b:'ÎºÎ¿ÏÎ¿ÎÎ´ÎµÏˆÎ±', correct:'a', rule:ruleTone },
    { a:'Î³Î¬Î¹Î´Î±ÏÎ¿Ï‚', b:'Î³Î±ÏŠÎ´Î±ÏÎ¿Ï‚', correct:'a', rule:ruleTone },
    { a:'ÎœÎ¬Î¹Î¿Ï‚', b:'ÎœÎ±ÎÎ¿Ï‚', correct:'a', rule:ruleTone },
    { a:'ÎšÎ¬Î¹ÏÎ¿', b:'ÎšÎ±ÎÏÎ¿', correct:'a', rule:ruleTone },
    { a:'Ï€ÏÏ‰Î¯', b:'Ï€ÏÏ‰Î', correct:'a', rule:ruleNoDiph },
    { a:'Î´Î¹Ï…Î»Î¹ÏƒÏ„Î®ÏÎ¹Î¿', b:'Î´Î¹Ï‹Î»Î¹ÏƒÏ„Î®ÏÎ¹Î¿', correct:'a', rule:ruleNoDiph },
  ];

  const bankGold = [
    { a:'Ï†Î±Î', b:'Ï†Î¬Î¹', correct:'a', rule:ruleBoth },
    { a:'ÎµÏ…Ï†Ï…ÎÎ±', b:'ÎµÏ…Ï†Ï…Î¯Î±', correct:'a', rule:ruleBoth },
    { a:'Î¤Î±Î°Î³ÎµÏ„Î¿Ï‚', b:'Î¤Î±Ï…Î³Î­Ï„Î¿Ï‚', correct:'a', rule:ruleBoth },
    { a:'ÎºÎ±ÎÎºÎ¹', b:'ÎºÎ±Î¹ÎºÎ¯', correct:'a', rule:ruleBoth },
  ];

  const bankRed = [
    { a:'ÎµÏ…Î½Î¿ÏŠÎºÏŒÏ‚', b:'ÎµÏ…Î½Î¿Î¹ÎºÏŒÏ‚', correct:'a', rule:ruleBase },
    { a:'ÎºÎ¿ÏÎ¿ÏŠÎ´Î¯Î±', b:'ÎºÎ¿ÏÎ¿Î¹Î´Î¯Î±', correct:'a', rule:ruleBase },
    { a:'Î±Î¸ÎµÏŠÏƒÎ¼ÏŒÏ‚', b:'Î±Î¸ÎµÎ¹ÏƒÎ¼ÏŒÏ‚', correct:'a', rule:ruleBase },
    { a:'Ï€ÏÎ¿Ï‹Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚', b:'Ï€ÏÎ¿Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚', correct:'a', rule:ruleBase },
    { a:'ÎµÏ…Ï‹Ï€ÏŒÎ»Î·Ï€Ï„Î¿Ï‚', b:'ÎµÏ…Ï…Ï€ÏŒÎ»Î·Ï€Ï„Î¿Ï‚', correct:'a', rule:ruleBase },
    { a:'Î´Î¹Î±Ï‹Î³Î®Ï‚', b:'Î´Î¹Î±Ï…Î³Î®Ï‚', correct:'a', rule:ruleBase },
  ];

  // â€œÎœÎ· ÎµÏ€Î±Î½Î¬Î»Î·ÏˆÎ·â€ ÏƒÏ„Î·Î½ Ï€Î±ÏÏ„Î¯Î´Î±
  const remaining = {
    blue: [...bankBlue.keys()],
    green: [...bankGreen.keys()],
    gold: [...bankGold.keys()],
    red: [...bankRed.keys()],
  };
  const pickNextIndex = (kind) => {
    const arr = remaining[kind];
    if(!arr.length){
      // Î±Î½ Ï„ÎµÎ»ÎµÎ¹ÏÏƒÎ¿Ï…Î½, Î¾Î±Î½Î±Î³ÎµÎ¼Î¯Î¶Î¿Ï…Î¼Îµ (ÏƒÏ€Î¬Î½Î¹Î¿)
      remaining[kind] = [...(kind==='blue'?bankBlue:kind==='green'?bankGreen:kind==='gold'?bankGold:bankRed).keys()];
    }
    const i = Math.floor(Math.random() * remaining[kind].length);
    return remaining[kind].splice(i,1)[0];
  };

  // ====== STATE ======
  const player = { pos: 1 };
  let animating = false;
  let trapTimer = null;
  let feedbackTimer = null;
  let active = null; // { kind, item, answered }

  // ====== DOM ======
  const boardEl = document.getElementById('board');
  const rollBtn = document.getElementById('rollBtn');
  const resetBtn = document.getElementById('resetBtn');
  const diceText = document.getElementById('diceText');
  const posText = document.getElementById('posText');
  const logEl = document.getElementById('log');

  const overlay = document.getElementById('overlay');
  const modalTitle = document.getElementById('modalTitle');
  const modalDesc = document.getElementById('modalDesc');
  const questionText = document.getElementById('questionText');
  const choicesEl = document.getElementById('choices');
  const rulebox = document.getElementById('rulebox');
  const closeBtn = document.getElementById('closeBtn');
  const timerWrap = document.getElementById('timerWrap');
  const timerNum = document.getElementById('timerNum');

  // Î´ÎµÎ½ Î¸Î­Î»Î¿Ï…Î¼Îµ Ï‡ÎµÎ¹ÏÎ¿ÎºÎ¯Î½Î·Ï„Î¿ ÎºÎ»ÎµÎ¯ÏƒÎ¹Î¼Î¿ (Î³Î¹Î± Î½Î± Î¼Î­Î½ÎµÎ¹ 8")
  closeBtn.style.display = 'none';
  closeBtn.onclick = null;

  // ====== BOARD ======
  const cells = new Map();
  for(let i=1;i<=N;i++){
    const d = document.createElement('div');
    d.className = 'cell';
    d.textContent = i;
    if(BLUE.has(i)) d.classList.add('blue');
    if(GREEN.has(i)) d.classList.add('green');
    if(GOLD.has(i)) d.classList.add('gold');
    if(RED.has(i)) d.classList.add('red');
    boardEl.appendChild(d);
    cells.set(i,d);
  }

  function renderPawn(){
    for(const [,cell] of cells){
      cell.querySelectorAll('.pawn').forEach(p=>p.remove());
    }
    const cell = cells.get(player.pos);
    if(cell){
      const pawn = document.createElement('div');
      pawn.className = 'pawn';
      cell.appendChild(pawn);
    }
    posText.textContent = String(player.pos);
  }

  function log(msg){
    const p = document.createElement('p');
    p.textContent = msg;
    logEl.appendChild(p);
    logEl.scrollTop = logEl.scrollHeight;
  }

  function clampPos(x){
    if(x < 1) return 1;
    if(x > N) return N;
    return x;
  }

  const sleep = (ms) => new Promise(r=>setTimeout(r,ms));

  function stopTrapTimer(){
    if(trapTimer){ clearInterval(trapTimer); trapTimer=null; }
  }
  function stopFeedbackTimer(){
    if(feedbackTimer){ clearTimeout(feedbackTimer); feedbackTimer=null; }
  }

  async function moveBy(steps){
    animating = true;
    rollBtn.disabled = true;

    const target = clampPos(player.pos + steps);
    const dir = target >= player.pos ? 1 : -1;

    while(player.pos !== target){
      player.pos += dir;
      renderPawn();
      await sleep(120);
    }

    animating = false;
    rollBtn.disabled = false;

    if(player.pos === N){
      log('ğŸ Î¤Î­Î»Î¿Ï‚! ÎˆÏ†Ï„Î±ÏƒÎµÏ‚ ÏƒÏ„Î¿ 100!');
      rollBtn.disabled = true;
      return;
    }

    // Trigger challenge after landing
    if(BLUE.has(player.pos)) return openChallenge('blue');
    if(GREEN.has(player.pos)) return openChallenge('green');
    if(GOLD.has(player.pos)) return openChallenge('gold');
    if(RED.has(player.pos)) return openChallenge('red');
  }

  function getItem(kind){
    if(kind==='blue')  return bankBlue[pickNextIndex('blue')];
    if(kind==='green') return bankGreen[pickNextIndex('green')];
    if(kind==='gold')  return bankGold[pickNextIndex('gold')];
    return bankRed[pickNextIndex('red')];
  }

  function openChallenge(kind){
    stopTrapTimer();
    stopFeedbackTimer();

    const item = getItem(kind);
    active = { kind, item, answered:false };

    rulebox.classList.remove('show');
    rulebox.innerHTML = '';
    timerWrap.style.display = (kind==='red') ? 'block' : 'none';

    modalTitle.textContent =
      kind==='blue'  ? 'ğŸŸ¦ Î•Ï€Î¯Ï€ÎµÎ´Î¿ 1: Î•ÏÎºÎ¿Î»Î¿' :
      kind==='green' ? 'ğŸŸ© Î•Ï€Î¯Ï€ÎµÎ´Î¿ 2: ÎœÎµÏƒÎ±Î¯Î¿' :
      kind==='gold'  ? 'ğŸŸ¨ Boss Level' :
      'ğŸŸ¥ Î¤ÎµÎ»Î¹ÎºÏŒ Î•Ï€Î¯Ï€ÎµÎ´Î¿ (Î¼Îµ Ï‡ÏÎ¿Î½ÏŒÎ¼ÎµÏ„ÏÎ¿)';

    modalDesc.textContent =
      kind==='blue'  ? 'Î”Î¹Î¬Î»ÎµÎ¾Îµ Ï„Î· ÏƒÏ‰ÏƒÏ„Î® Î³ÏÎ±Ï†Î®. Î‘Î½ ÎµÎ¯Î½Î±Î¹ ÏƒÏ‰ÏƒÏ„ÏŒ: +1 Î¸Î­ÏƒÎ·.' :
      kind==='green' ? 'Î”Î¹Î¬Î»ÎµÎ¾Îµ Ï„Î· ÏƒÏ‰ÏƒÏ„Î® Î³ÏÎ±Ï†Î®. Î‘Î½ ÎµÎ¯Î½Î±Î¹ ÏƒÏ‰ÏƒÏ„ÏŒ: +2 Î¸Î­ÏƒÎµÎ¹Ï‚.' :
      kind==='gold'  ? 'Î”Î¹Î¬Î»ÎµÎ¾Îµ Ï„Î· ÏƒÏ‰ÏƒÏ„Î® Î³ÏÎ±Ï†Î®. Î‘Î½ ÎµÎ¯Î½Î±Î¹ ÏƒÏ‰ÏƒÏ„ÏŒ: +3 Î¸Î­ÏƒÎµÎ¹Ï‚.' :
      'Î”Î¹Î¬Î»ÎµÎ¾Îµ Î³ÏÎ®Î³Î¿ÏÎ± (5"). Î‘Î½ ÎµÎ¯Î½Î±Î¹ ÏƒÏ‰ÏƒÏ„ÏŒ: +4. Î‘Î½ ÎµÎ¯Î½Î±Î¹ Î»Î¬Î¸Î¿Ï‚ Î® Î±ÏÎ³Î®ÏƒÎµÎ¹Ï‚: âˆ’3.';

    questionText.textContent = `Î”Î¹Î¬Î»ÎµÎ¾Îµ Ï„Î· ÏƒÏ‰ÏƒÏ„Î® Î³ÏÎ±Ï†Î®:`;

    // 2 ÎºÎ¿Ï…Î¼Ï€Î¹Î¬ ÎµÏ€Î¹Î»Î¿Î³ÏÎ½
    choicesEl.innerHTML = '';
    const btnA = document.createElement('button');
    btnA.className = 'choice';
    btnA.type = 'button';
    btnA.textContent = item.a;
    btnA.onclick = () => submitAnswer('a');

    const btnB = document.createElement('button');
    btnB.className = 'choice';
    btnB.type = 'button';
    btnB.textContent = item.b;
    btnB.onclick = () => submitAnswer('b');

    choicesEl.appendChild(btnA);
    choicesEl.appendChild(btnB);

    overlay.classList.add('show');

    if(kind==='red') startRedTimer(TRAP_SECONDS);
  }

  function startRedTimer(seconds){
    stopTrapTimer();
    let remaining = seconds;
    timerNum.textContent = String(remaining);

    trapTimer = setInterval(()=>{
      remaining -= 1;
      timerNum.textContent = String(remaining);
      if(remaining <= 0){
        stopTrapTimer();
        if(active && !active.answered){
          // timeout
          active.answered = true;
          lockChoices();
          showFeedback(false, true);
          scheduleResolution(false, true);
        }
      }
    }, 1000);
  }

  function lockChoices(){
    Array.from(choicesEl.querySelectorAll('button')).forEach(b=>b.disabled=true);
  }

  function showFeedback(correct, timeout=false){
    const { item } = active;

    rulebox.classList.add('show');
    rulebox.innerHTML = `
      <div style="font-weight:900;margin-bottom:6px;">
        ${timeout ? 'â±ï¸ Î Î¿Î»Ï Î±ÏÎ³Î¬!' : (correct ? 'âœ… Î£Ï‰ÏƒÏ„ÏŒ!' : 'âŒ Î›Î¬Î¸Î¿Ï‚!')}
      </div>
      <div style="font-weight:900;margin-bottom:6px;">ÎšÎ±Î½ÏŒÎ½Î±Ï‚:</div>
      <div>${item.rule}</div>
    `;
  }

  function scheduleResolution(correct, timeout=false){
    stopFeedbackTimer();
    feedbackTimer = setTimeout(async () => {
      overlay.classList.remove('show');

      const kind = active.kind;

      // moves
      if(kind==='blue' && correct){ log('âœ… Î£Ï‰ÏƒÏ„ÏŒ (ğŸŸ¦) â†’ +1'); await moveBy(+1); return; }
      if(kind==='green' && correct){ log('âœ… Î£Ï‰ÏƒÏ„ÏŒ (ğŸŸ©) â†’ +2'); await moveBy(+2); return; }
      if(kind==='gold' && correct){ log('âœ… Î£Ï‰ÏƒÏ„ÏŒ (ğŸŸ¨) â†’ +3'); await moveBy(+3); return; }

      if(kind==='red'){
        if(correct){ log('âœ… Î£Ï‰ÏƒÏ„ÏŒ (ğŸŸ¥) â†’ +4'); await moveBy(+4); return; }
        log(timeout ? 'â±ï¸ Timeout (ğŸŸ¥) â†’ âˆ’3' : 'âŒ Î›Î¬Î¸Î¿Ï‚ (ğŸŸ¥) â†’ âˆ’3');
        await moveBy(-3);
        return;
      }

      // wrong on blue/green/gold => no move
      log(kind==='blue' ? 'âŒ Î›Î¬Î¸Î¿Ï‚ (ğŸŸ¦) â†’ 0' : kind==='green' ? 'âŒ Î›Î¬Î¸Î¿Ï‚ (ğŸŸ©) â†’ 0' : 'âŒ Î›Î¬Î¸Î¿Ï‚ (ğŸŸ¨) â†’ 0');
    }, FEEDBACK_MS);
  }

  function submitAnswer(choice){
    if(!active || active.answered) return;

    active.answered = true;
    stopTrapTimer();

    lockChoices();

    const correct = (choice === active.item.correct);
    showFeedback(correct, false);
    scheduleResolution(correct, false);
  }

  rollBtn.onclick = async () => {
    if(animating) return;
    // Î±Î½ ÎµÎ¯Î½Î±Î¹ Î±Î½Î¿Î¹Ï‡Ï„ÏŒ overlay, Î¼Î·Î½ ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹Ï‚ Î½Î­Î¿ Î¶Î¬ÏÎ¹
    if(overlay.classList.contains('show')) return;

    const roll = 1 + Math.floor(Math.random()*6);
    diceText.textContent = String(roll);
    log(`ğŸ² ÎˆÏÎ¹Î¾ÎµÏ‚: ${roll}`);
    await moveBy(roll);
  };

  resetBtn.onclick = () => {
    stopTrapTimer();
    stopFeedbackTimer();
    overlay.classList.remove('show');

    rollBtn.disabled = false;
    diceText.textContent = 'â€”';
    logEl.innerHTML = '';

    // ÎµÏ€Î±Î½Î±Ï†Î¿ÏÎ¬ Î´ÎµÎ¾Î±Î¼ÎµÎ½ÏÎ½ (Î¼Î· ÎµÏ€Î±Î½Î¬Î»Î·ÏˆÎ·)
    remaining.blue = [...bankBlue.keys()];
    remaining.green = [...bankGreen.keys()];
    remaining.gold = [...bankGold.keys()];
    remaining.red = [...bankRed.keys()];

    player.pos = 1;
    renderPawn();
    log('ğŸ”„ ÎÎ­Î± Ï€Î±ÏÏ„Î¯Î´Î±!');
  };

  // init
  renderPawn();
  log('ğŸ® ÎˆÏ„Î¿Î¹Î¼Î¿! Î Î¬Ï„Î± "Î¡Î¯Î¾Îµ Ï„Î¿ Î¶Î¬ÏÎ¹".');
})();
</script>
